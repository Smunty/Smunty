<!DOCTYPE html>
<html lang="tr" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Öğrenci Asistanı 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkblue: {
                            950: '#0f172a', // Derin Lacivert
                            900: '#1e293b',
                            800: '#334155'
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        .glass {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light .glass {
            background: rgba(0, 0, 0, 0.02);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body
    class="bg-darkblue-950 text-slate-200 dark:bg-darkblue-950 dark:text-slate-200 light:bg-slate-50 light:text-slate-900">

    <div class="max-w-5xl mx-auto p-4 md:p-10 space-y-6">

        <div
            class="flex justify-between items-center bg-white/5 dark:bg-white/5 light:bg-black/5 p-6 rounded-3xl border border-white/10">
            <div>
                <h1 id="clock" class="text-5xl font-black tracking-tighter text-blue-400">00:00</h1>
                <p id="date" class="text-sm font-medium opacity-60 uppercase tracking-widest"></p>
            </div>

        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="glass p-6 rounded-3xl">
                    <span class="text-xs font-bold text-blue-400 uppercase">MSÜ Sınavı</span>
                    <p class="text-sm opacity-50 mb-2">1 Mart 2026</p>
                    <div id="msu-timer" class="text-2xl font-bold italic">Hesaplanıyor...</div>
                </div>
                <div class="glass p-6 rounded-3xl">
                    <span class="text-xs font-bold text-purple-400 uppercase">YKS (TYT)</span>
                    <p class="text-sm opacity-50 mb-2">20 Haziran 2026</p>
                    <div id="yks-timer" class="text-2xl font-bold italic">Hesaplanıyor...</div>
                </div>

                <div class="sm:col-span-2 glass p-6 rounded-3xl border-l-4 border-l-yellow-500">
                    <h3 class="text-sm font-bold uppercase mb-4 text-yellow-500">Okul Tatili Takvimi</h3>
                    <div class="space-y-4" id="school-holidays">
                    </div>
                </div>
            </div>

            <div class="glass p-6 rounded-3xl space-y-4">
                <div class="flex flex-col gap-2">
                    <span class="text-xs font-bold text-blue-400 uppercase">Bölge Değiştir</span>
                    <div class="flex gap-2">
                        <input type="text" id="city-input" placeholder="Şehir yaz..."
                            class="w-full bg-white/10 rounded-lg p-2 text-sm outline-none border border-white/10 focus:border-blue-500">
                        <button onclick="searchWeather()"
                            class="bg-blue-600 px-3 rounded-lg text-sm font-bold">Ara</button>
                    </div>
                </div>

                <div class="text-center py-4 border-t border-white/10">
                    <p id="current-city" class="text-xl font-bold">Ankara, Altındağ</p>
                    <p id="current-temp" class="text-4xl font-black my-2">--°C</p>
                </div>

                <div id="weekly-weather" class="space-y-2 text-xs">
                </div>
            </div>
        </div>

        <div class="glass p-6 rounded-3xl">
            <h3 class="text-sm font-bold uppercase mb-4 opacity-50">Sıradaki Resmi Tatiller</h3>
            <div id="official-holidays" class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm font-medium">
            </div>
        </div>

    </div>

    <script>


        // --- SAAT VE TARİH ---
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            document.getElementById('date').textContent = now.toLocaleDateString('tr-TR', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
        }
        setInterval(updateClock, 1000); updateClock();

        // --- GERİ SAYIM MOTORU ---
        function getDiff(targetDate) {
            const diff = new Date(targetDate) - new Date();
            if (diff < 0) return "Süre Doldu";
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            return `${days} gün ${hours} saat`;
        }

        function updateTimers() {
            document.getElementById('msu-timer').innerText = getDiff("2026-03-01T10:15:00");
            document.getElementById('yks-timer').innerText = getDiff("2026-06-20T10:15:00");
        }
        setInterval(updateTimers, 60000); updateTimers();

        // --- OKUL VE RESMİ TATİLLER (2026) ---
        const schoolHolidays = [
            { name: "Sömestr (15 Tatil) Başlangıcı", date: "2026-01-19" },
            { name: "2. Dönem Başlangıcı", date: "2026-02-02" },
            { name: "Nisan Ara Tatili", date: "2026-04-06" },
            { name: "Yaz Tatili (Okul Kapanış)", date: "2026-06-19" }
        ];

        const officialHolidays = [
            { name: "Ramazan Bayramı", date: "2026-03-20" },
            { name: "23 Nisan Ulusal Egemenlik", date: "2026-04-23" },
            { name: "1 Mayıs Emek Bayramı", date: "2026-05-01" },
            { name: "19 Mayıs Gençlik Bayramı", date: "2026-05-19" }
        ];

        function loadHolidays() {
            const schoolDiv = document.getElementById('school-holidays');
            schoolDiv.innerHTML = schoolHolidays.map(h => `
                <div class="flex justify-between items-center text-sm">
                    <span>${h.name} <span class="text-[10px] opacity-40">(${h.date})</span></span>
                    <span class="font-bold text-yellow-500">${getDiff(h.date).split(' ')[0]} Gün</span>
                </div>
            `).join('');

            const officialDiv = document.getElementById('official-holidays');
            officialDiv.innerHTML = officialHolidays.map(h => `
                <div class="p-3 bg-white/5 rounded-xl border border-white/5">
                    <p class="text-[10px] opacity-50">${h.date}</p>
                    <p class="font-bold">${h.name}</p>
                    <p class="text-blue-400 mt-1">${getDiff(h.date).split(' ')[0]} gün kaldı</p>
                </div>
            `).join('');
        }
        loadHolidays();

        // --- HAVA DURUMU (ŞEHİR ARAMALI) ---
        async function fetchWeather(lat = 39.94, lon = 32.87, cityName = "Ankara, Altındağ") {
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=temperature_2m_max,weathercode&current_weather=true&timezone=auto`);
                const data = await response.json();

                document.getElementById('current-city').innerText = cityName;
                document.getElementById('current-temp').innerText = Math.round(data.current_weather.temperature) + "°C";

                const weeklyDiv = document.getElementById('weekly-weather');
                weeklyDiv.innerHTML = "";
                const days = ["Paz", "Pzt", "Sal", "Çar", "Per", "Cum", "Cmt"];

                for (let i = 0; i < 5; i++) {
                    const d = new Date(data.daily.time[i]);
                    weeklyDiv.innerHTML += `
                        <div class="flex justify-between items-center p-2 bg-black/10 rounded-lg">
                            <span>${days[d.getDay()]}</span>
                            <span class="font-bold">${Math.round(data.daily.temperature_2m_max[i])}°C</span>
                        </div>
                    `;
                }
            } catch (e) { alert("Hava durumu yüklenemedi!"); }
        }

        async function searchWeather() {
            const city = document.getElementById('city-input').value;
            if (!city) return;
            const geoRes = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1&language=tr&format=json`);
            const geoData = await geoRes.json();
            if (geoData.results) {
                const r = geoData.results[0];
                fetchWeather(r.latitude, r.longitude, `${r.name}, ${r.admin1 || ''}`);
            } else { alert("Şehir bulunamadı!"); }
        }

        // Başlangıçta Ankara'yı getir
        fetchWeather();
    </script>
</body>

</html>